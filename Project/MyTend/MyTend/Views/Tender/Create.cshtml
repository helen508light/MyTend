@model MyTend.Models.CreateTenderModel

@{
    ViewBag.Title = "Закажите ведущего,банкетный зал, dj, тамаду, артистов: " + Model.Theme.Theme;
}

@using (Html.BeginForm("Create", "Tender", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
<div style="text-align: center;">
    <div style="font-style: italic">Реклама</div>
    <a href="http://www.mazan-masters.com/#!-/co97" target="_blank">
        <img src="~/Content/images/MAZANdance.png" style="width: 85%" />
    </a>
</div>
    <div class="form-group" style="text-align: center">
        <h3 style="color: #333333;">Заполните заявку, указав исполнителям все подробности вашего предстоящего события</h3>
    </div>
    <div>
        <div class="row">
            <div class="col-lg-12 text-center">
                @Html.ActionLink("Инструкция заполнения заявок", "Instruction", "Docs")
            </div>
        </div>
    </div>
    <div class="form-horizontal">
        <div class="row">
            <div class="col-md-4" style="text-align: center">
                <img src="~/Content/images/kats/@Model.Theme.ImageName" width="150" height="120" />
            </div>
            <div class="col-md-8">
                <br /><br />
                <h4 style="color: #8294a8;">Новая заяка - @Model.Theme.Theme</h4>
            </div>
        </div>
                @if (Model.Errors.Count > 0)
        {
            <div class="alert alert-danger" role="alert">
                @foreach (var item in Model.Errors)
                {
                    <p>@item</p>
                }
            </div>
        }

        <input hidden="hidden" value="@Model.Theme" name="Theme" />
        <div class="form-group">
            <label for="SubTheme2" class="control-label col-md-4"></label>
            <div class="col-md-4">
                <input name="ThemeId" value="@Model.Theme.Id" hidden />
            </div>
        </div>
        <div class="form-group">
            <label for="TitleString" class="control-label col-md-4"><div style="color: #ff6933;">Какая услуга Вам нужна?</div></label>
            <div class="col-md-4">
                <select class="form-control" name="TitleId" required>
                    @if (string.IsNullOrEmpty(Model.Theme.Title))
                    {
                        <option selected="selected" disabled="disabled">Выберите услугу</option>
                    }
                    else
                    {
                        <option selected="selected" disabled="disabled">Выберите услугу</option>
                    }

                    @foreach (var item in Model.ListThemes)
                    {
                        if (item.IsTitle)
                        {
                            <option disabled="disabled" style="color: #ff6933; font-weight: bold;">@item.Title</option>
                        }
                        else
                        {
                            if (Model.Theme.Id == item.Id)
                            {
                                <option value="@item.Id">@item.Title</option>
                            }
                            else
                            {
                                <option value="@item.Id">@item.Title</option>
                            }
                        }

                    }
                </select>
            </div>
        </div>
<hr>
        <div class="form-group">
            <label for="SubTheme2" class="control-label col-md-4"><div style="color: #31c9e9;">Страна исполнения заявки:</div></label>
            <div class="col-md-4">
                <select class="form-control" name="CountryId" id="CountrysSelect" required>
                    <option disabled selected>Выберите страну</option>
                    @foreach (var item in Model.ListCountrys)
                    {
                        <option id="@item.Id">@item.Name</option>
                    }
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="SubTheme2" class="control-label col-md-4"><div style="color: #31c9e9;">Регион исполнения заявки:</div></label>
            <div class="col-md-4">
                <select class="form-control" name="RegionId" id="RegionSelect" required>
                    <option disabled selected>Выберите регион</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="SubTheme2" class="control-label col-md-4"><div style="color: #31c9e9;">Город исполнения заявки:</div></label>
            <div class="col-md-4">
                <select class="form-control" name="CityId" required>
                    <option disabled selected>Выберите город</option>
                </select>
            </div>
        </div>
<hr>
        <div class="form-group">
            <label for="Title" class="control-label col-md-4"><div style="color: #ff6933;">Придумайте название заявки:</div></label>
            <div class="col-md-8">
                <input type="text" required class="form-control" placeholder="Например: Ищу ведущего/банкетный зал или DJ на юбилей 3 сентября" name="Title" maxlength="100" value="@Model.Title" />
            </div>
        </div>

        <div class="form-group">
            <label for="Message" class="control-label col-md-4"><div style="color: #ff6933;">Текст заявки/условия конкурса:</div></label>
            <div class="col-md-8">
                <textarea class="form-control" required rows="7" maxlength="10000" name="Message" placeholder="Максимально подробно опишите детали и условия вашей заявки, укажите дату, место проведения события, количество гостей и прочие условия, которые необходимо учесть исполнителям, перед тем, как сделать Вам выгодное предложение."></textarea>
            </div>
        </div>
<hr>
        <div class="form-group">
            <label for="CountGuests" class="control-label col-md-4"><div style="color: #24ac34;">Количество гостей?</div></label>
            <div class="col-md-2">
                <input type="number" min="0" step="1" class="form-control" name="CountGuests" placeholder="Количество гостей" value="@Model.CountGuests" />
            </div>
        </div>
        <div class="form-group">
            <label for="Cost" class="control-label col-md-4"><div style="color: #24ac34;">На какую сумму Вы ориентируетесь?</div></label>
            <div class="col-md-2">
                <input type="number" min="0" step="1" class="form-control" name="Cost" placeholder="Средняя цена" value="@Model.Cost" />
            </div>
        </div>

        <div class="form-group">
            <label for="ListFiles" class="control-label col-md-4"><div style="color: #386a71;">Прикрепите 2 фото (если необходимо, до 2Mg)</div></label>
            <div class="col-md-5">
                <input type="file" accept="image/*" multiple class="form-control" name="ListFiles" value="" />
            </div>
        </div>

        <div class="form-group">
            <label for="SubTheme2" class="control-label col-md-4"><div style="color: #c15671;">Какое время, Вы планируете рассматривать предложения от исполнителей услуг?</div></label>
            <div class="col-md-2">
                <select class="form-control" name="ActiveTime">
                    @if (Model.ActiveTime == "3 дня")
                    {
                        <option selected="selected">3 дня</option>
                    }
                    else
                    {
                        <option>3 дня</option>
                    }
                    @if (Model.ActiveTime == "7 дней")
                    {
                        <option selected="selected">7 дней</option>
                    }
                    else
                    {
                        <option>7 дней</option>
                    }
                    @if (Model.ActiveTime == "14 дней")
                    {
                        <option selected="selected">14 дней</option>
                    }
                    else
                    {
                        <option>14 дней</option>
                    }
                    @if (Model.ActiveTime == "21 день")
                    {
                        <option selected="selected">21 день</option>
                    }
                    else
                    {
                        <option>21 день</option>
                    }
                </select>
            </div>
        </div>
        <div style="padding: 20px 0px 20px 0px; text-align: center;">
            Нажатие кнопки «Отправить заявку исполнителям» означает согласие с <a href="~/Docs/Instruction">Инструкцией заполнения заявок</a>.
        </div>
        <div class="form-group">
            <div class="col-md-12" style="text-align: center;">
                <button type="submit" class="btn btn-custom-red" style="width: 50%"><strong>Отправить заявку исполнителям</strong></button>
            </div>
        </div>
    </div>
}
<script src="~/Scripts/app/selectRegions.js"></script>
<script>
    blockBtns();

    function blockBtns() {
        var els = $('button[type=submit]');
        els.on('click', function (e) {
            $('form').validate({
                invalidHandler: function (event, validator) {
                    $("label.error").remove();
                },
                submitHandler: function (form) {
                    $('button[type=submit]').attr('disabled', 'disabled');
                    form.submit();
                }
            });
        });
    }
</script>